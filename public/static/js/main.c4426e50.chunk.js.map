{"version":3,"sources":["Layout/logo.png","Utilities/history.js","Utilities/handle-response.js","Services/authenticationService.js","Utilities/private-route.js","Home/Login.jsx","Home/Register.jsx","Home/Home.jsx","Layout/Header.jsx","Utilities/common.js","Utilities/auth-header.js","Chat/ChatBox.jsx","Services/chatService.js","Chat/Conversations.jsx","Chat/Users.jsx","Services/userService.js","Chat/Chat.jsx","App.js","serviceWorker.js","index.js"],"names":["module","exports","history","createBrowserHistory","useHandleResponse","enqueueSnackbar","useSnackbar","response","text","then","data","JSON","parse","ok","indexOf","status","authenticationService","logout","variant","error","message","statusText","Promise","reject","currentUserSubject","BehaviorSubject","localStorage","getItem","removeItem","next","currentUser","asObservable","value","PrivateRoute","_ref","Component","component","rest","_objectWithoutProperties","_excluded","React","createElement","Route","Object","assign","render","props","currentUserValue","Redirect","to","pathname","state","from","location","useStyles","makeStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","form","width","submit","margin","Login","login","handleResponse","username","password","requestOptions","method","headers","body","stringify","fetch","concat","process","user","setItem","catch","useLogin","classes","className","Grid","container","item","Typography","align","Formik","initialValues","validationSchema","Yup","shape","required","max","min","onSubmit","_ref2","setStatus","setSubmitting","push","_ref4","handleSubmit","handleChange","values","touched","errors","TextField","id","textField","name","label","fullWidth","helperText","Boolean","onChange","type","Button","color","xs","Link","onClick","handleClick","href","Register","register","password2","useRegister","oneOf","validateOnChange","validateOnBlur","isValid","Home","_useState","useState","_useState2","_slicedToArray","page","setPage","useEffect","Content","Container","maxWidth","root","flexGrow","title","userDropdown","_defineProperty","marginLeft","padding","breakpoints","down","Header","_useState3","_useState4","anchorEl","setAnchorEl","_useState5","_useState6","dropdownOpen","setDropdownOpen","AppBar","position","Toolbar","src","logo","alt","aria-owns","undefined","aria-haspopup","event","currentTarget","ArrowDropUpIcon","ArrowDropDownIcon","Menu","open","onClose","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","MenuItem","String","split","map","i","charAt","join","authHeader","token","Authorization","height","headerRow","maxHeight","zIndex","justifyContent","palette","primary","dark","messageContainer","alignContent","messagesRow","overflowY","newMessageRow","messageBubble","border","backgroundColor","borderRadius","boxShadow","messageBubbleRight","inputRow","avatar","listItem","listItemRight","ChatBox","userId","currentUserId","newMessage","setNewMessage","messages","setMessages","_useState7","_useState8","lastMessage","setLastMessage","getGlobalMessages","useGetGlobalMessages","sendGlobalMessage","global","err","console","log","useSendGlobalMessage","getConversationMessages","useGetConversationMessages","sendConversationMessage","useSendConversationMessage","chatBottom","useRef","reloadMessages","scrollToBottom","scope","conversationId","socketIOClient","on","res","_id","current","scrollIntoView","behavior","Paper","square","elevation","List","m","ListItem","key","classnames","fromObj","ListItemAvatar","Avatar","commonUtilites","ListItemText","secondary","Fragment","ref","e","preventDefault","target","IconButton","SendIcon","subheader","cursor","globe","subheaderText","list","Conversations","conversations","setConversations","newConversation","setNewConversation","getConversations","useGetConversations","handleRecipient","recipients","length","socket","removeListener","setScope","LanguageIcon","Divider","c","button","setUser","recipientObj","Users","users","setUsers","newUser","setNewUser","getUsers","useGetUsers","u","minHeight","sidebar","Chat","tab","setTab","md","Tabs","newVal","indicatorColor","textColor","Tab","createMuiTheme","light","main","contrastText","background","default","typography","useNextVariants","App","ThemeProvider","CssBaseline","SnackbarProvider","maxSnack","autoHideDuration","Router","path","exact","window","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c4426e50.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALQAAAAvCAMAAAB9shCAAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAS9QTFRFAAAA8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8PHy1OXywNzyv9zyx9/y6u7y////////j8byKJnzIZbzIpbzWK7z3+ry////////////////////////////////////////////8vLyaLXz////////////Z7Xz////////////8vLy////////////////////////YbHx4Obu6+7w////////8vLyI4rjJ3HEKHHERIPLr8fjHYbiFWXAK3PF3eXt////vM/mHYXhuc3lG33Z8vLyIZXyHonmFmjELpzzmsvys9byp87vJ33SGXTQGHHMFWfCJZjzttjyy+HysNXy5urvNHnHj7PcGWjB7/Dxssnjhq3Zg6vZaJrTGGfB8vLy82QbYQAAAGV0Uk5TABBPj7/v/0CvIM8wkP///////2B/////////EF+fv8D/QFDvIOCw/zDPcP/f8NBQgK9Pb48/////sKDA////////////kP/////w/////////////////////////////////9AlihfCAAAEhklEQVR4nO2Ze3vTNhSHHZoolKYMZjO2mcRy7GRuqF2XJCtuBtsKhhI2dh+wewff/zNMRzdLthXa/JFkPP09T9vYlo5enXN0JKeWdalLve9qXNlqthBCrebWlca6Yc6n9lWk6mp73UDvVruJympuOHZjq4IM2trkJNm+VsuM0LXtdaMZtdMyMJM1ubNuOIO2zcyEejN93TDlBs+QjczrzkJmhDrrBqxRm6HtXv/gRqGbHyrU76x8tuM4q0AtxOrz7q2Pbiv6+JNPC+hmtZN7p9vr9bp3XHrlYYyXGdonk+0v05E7+rrGTHRrgatdJ8BMgXMuaAhFWL09AAvuEtBDxnWjxHz7MwV6qHeJ9nChPfcc0NDAr06FGhhdnLmBDNB31bWoFRB3nw7meV4Mf/tLQyfUzv7FoQ/OBX1QJsApjeooxja/Q9LcOXTuiUbR2OlO+GU0hdCMp1M9Q3xyExLE5tep49hWRLqNeTu6vsPxpOtEOnTHBP350dHR/bqqB2PJgSJbTGMUyGwhbUQC7ftilnSm2tAZuRORnx6/hugds4ZdV5hlKYR7GvbMBP3FgwcPv/yKP50pPcCup89cUgG1fiOITNAhuZFRa76E1laKZjZQqVsm6K9PiB49Zk9bSo+E5XEVOmE5brNoZGmax8yPOX2QeJ6tdmK4ELdjBTrOjmmq59Ksl3vSGVxoIfTJE/5Y6QEWSjkGVmPiLzeh3iOyaXwjgBU+Ky1El6TTgPsglIYTaJ1i1o2ajSyekYqjjNBPKfRpPXSptnoiy/ul1BGwNdBABtXOlq4uvMHteVgUxLSIx0LoZybouArgieFcyD74EE56Yi0aoEndiGHubiw2GPBrMaFUMUtdrThjXg/9/JtvVei5MlrGM64EbUlvWWLbWAQNLYIeKBArtABToK06aKV6vPju+x9+/Inp519OVGi1eoywuvfK2qRCQ2GI8zRNzemRqLWCbTBYWskLaNarlHZFnf71JUJHD090nVbrNMSTl2PL7crapEKPRDLmfNisDO1jXTbvS3uFAWsOZg/lFJV6KXfEF4TZCK3tiDT2wWQ6nY73y2cPBm3zMSI+Oo13l9BIGzCL1GeCKe7xvtgJ3XtwTBhwX+DDyPJ78EHZTsXZ49VrtABaf3nJNSf1q9Cwz+GuMwlETvdZU1lraf5IewPWqmxV21z0ZTRkWLv092+/10KXTnmWHUtbsbCuQstpyazM2LWo78dauCEOGe07EIbl6UDkvlLwLHme5vrjzzroyquLmw6oqSStXYhkWvB8MPIFtJvSTZHnNWwsSrhDFn2YZES9m7F28Nmlp5FE20uton5Q/fX3P2dC/77h0DOrRiHJxoXnd7906nerZ1NdmFUIX2633BdRTUfd1eoEzjj0ir4dw+WD2KJjuvlt/OzNKVrd2/iFoBtvzb5+gtDbVX3vcSFoa3tupL6P5iv7roa8v+nHg5zcMTffMVKj+aZ+l0d8bcqQleXGMmrUr8bOJjMTtWcV5NmG/ycA1B5qyMP/ATKocdCZwZqczzoHG54Yl7rU+6L/AF9AADqg9eWNAAAAAElFTkSuQmCC\"","import { createBrowserHistory } from 'history';\r\n\r\nconst history = createBrowserHistory();\r\n\r\nexport default history;\r\n","import { authenticationService } from '../Services/authenticationService';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nconst useHandleResponse = () => {\r\n    const { enqueueSnackbar } = useSnackbar();\r\n\r\n    const handleResponse = response => {\r\n        return response.text().then(text => {\r\n            const data = text && JSON.parse(text);\r\n            if (!response.ok) {\r\n                if ([401, 403].indexOf(response.status) !== -1) {\r\n                    authenticationService.logout();\r\n                    enqueueSnackbar('User Unauthorized', {\r\n                        variant: 'error',\r\n                    });\r\n                }\r\n\r\n                const error = (data && data.message) || response.statusText;\r\n                return Promise.reject(error);\r\n            }\r\n\r\n            return data;\r\n        });\r\n    };\r\n\r\n    return handleResponse;\r\n};\r\n\r\nexport default useHandleResponse;\r\n","import { BehaviorSubject } from 'rxjs';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nimport useHandleResponse from '../Utilities/handle-response';\r\n\r\nconst currentUserSubject = new BehaviorSubject(\r\n    JSON.parse(localStorage.getItem('currentUser'))\r\n);\r\n\r\nexport const authenticationService = {\r\n    logout,\r\n    currentUser: currentUserSubject.asObservable(),\r\n    get currentUserValue() {\r\n        return currentUserSubject.value;\r\n    },\r\n};\r\n\r\nexport function useLogin() {\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const handleResponse = useHandleResponse();\r\n\r\n    const login = (username, password) => {\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ username, password }),\r\n        };\r\n\r\n        return fetch(\r\n            `${process.env.REACT_APP_API_URL}/api/users/login`,\r\n            requestOptions\r\n        )\r\n            .then(handleResponse)\r\n            .then(user => {\r\n                localStorage.setItem('currentUser', JSON.stringify(user));\r\n                currentUserSubject.next(user);\r\n                return user;\r\n            })\r\n            .catch(function() {\r\n                enqueueSnackbar('Failed to Login', {\r\n                    variant: 'error',\r\n                });\r\n            });\r\n    };\r\n\r\n    return login;\r\n}\r\n\r\nexport function useRegister() {\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const handleResponse = useHandleResponse();\r\n\r\n    const register = (name, username, password, password2) => {\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ name, username, password, password2 }),\r\n        };\r\n\r\n        return fetch(\r\n            `${process.env.REACT_APP_API_URL}/api/users/register`,\r\n            requestOptions\r\n        )\r\n            .then(handleResponse)\r\n            .then(user => {\r\n                localStorage.setItem('currentUser', JSON.stringify(user));\r\n                currentUserSubject.next(user);\r\n\r\n                return user;\r\n            })\r\n            .catch(function(response) {\r\n                if (response) {\r\n                    enqueueSnackbar(response, {\r\n                        variant: 'error',\r\n                    });\r\n                } else {\r\n                    enqueueSnackbar('Failed to Register', {\r\n                        variant: 'error',\r\n                    });\r\n                }\r\n            });\r\n    };\r\n\r\n    return register;\r\n}\r\n\r\nfunction logout() {\r\n    localStorage.removeItem('currentUser');\r\n    currentUserSubject.next(null);\r\n}\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nimport { authenticationService } from '../Services/authenticationService';\r\n\r\nconst PrivateRoute = ({ component: Component, ...rest }) => (\r\n    <Route\r\n        {...rest}\r\n        render={props => {\r\n            const currentUser = authenticationService.currentUserValue;\r\n            if (!currentUser) {\r\n                // not logged in so redirect to login page with the return url\r\n                return (\r\n                    <Redirect\r\n                        to={{ pathname: '/', state: { from: props.location } }}\r\n                    />\r\n                );\r\n            }\r\n\r\n            // authorised so return component\r\n            return <Component {...props} />;\r\n        }}\r\n    />\r\n);\r\n\r\nexport default PrivateRoute;\r\n","import React from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport { Formik } from 'formik';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Link from '@material-ui/core/Link';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport * as Yup from 'yup';\r\n\r\nimport history from '../Utilities/history';\r\nimport { useLogin } from '../Services/authenticationService';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    form: {\r\n        width: '100%',\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    submit: {\r\n        margin: theme.spacing(3, 0, 2),\r\n    },\r\n}));\r\n\r\nconst Login = props => {\r\n    const login = useLogin();\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.paper}>\r\n            <Grid container>\r\n                <Grid item>\r\n                    <Typography component=\"h1\" variant=\"h5\" align=\"center\">\r\n                        Sign in\r\n                    </Typography>\r\n                    <Formik\r\n                        initialValues={{\r\n                            username: '',\r\n                            password: '',\r\n                        }}\r\n                        validationSchema={Yup.object().shape({\r\n                            username: Yup.string()\r\n                                .required('Username is required')\r\n                                .max(40, 'Username is too long'),\r\n                            password: Yup.string()\r\n                                .required('Password is required')\r\n                                .max(100, 'Password is too long')\r\n                                .min(6, 'Password too short'),\r\n                        })}\r\n                        onSubmit={(\r\n                            { username, password },\r\n                            { setStatus, setSubmitting }\r\n                        ) => {\r\n                            setStatus();\r\n                            login(username, password).then(\r\n                                () => {\r\n                                    const { from } = history.location.state || {\r\n                                        from: { pathname: '/chat' },\r\n                                    };\r\n                                    history.push(from);\r\n                                },\r\n                                error => {\r\n                                    setSubmitting(false);\r\n                                    setStatus(error);\r\n                                }\r\n                            );\r\n                        }}\r\n                    >\r\n                        {({\r\n                            handleSubmit,\r\n                            handleChange,\r\n                            values,\r\n                            touched,\r\n                            errors,\r\n                        }) => (\r\n                            <form\r\n                                onSubmit={handleSubmit}\r\n                                className={classes.form}\r\n                            >\r\n                                <TextField\r\n                                    id=\"username\"\r\n                                    className={classes.textField}\r\n                                    name=\"username\"\r\n                                    label=\"Username\"\r\n                                    fullWidth={true}\r\n                                    variant=\"outlined\"\r\n                                    margin=\"normal\"\r\n                                    required={true}\r\n                                    helperText={\r\n                                        touched.username ? errors.username : ''\r\n                                    }\r\n                                    error={\r\n                                        touched.username &&\r\n                                        Boolean(errors.username)\r\n                                    }\r\n                                    value={values.username}\r\n                                    onChange={handleChange}\r\n                                />\r\n                                <TextField\r\n                                    id=\"password\"\r\n                                    className={classes.textField}\r\n                                    name=\"password\"\r\n                                    label=\"Password\"\r\n                                    fullWidth={true}\r\n                                    variant=\"outlined\"\r\n                                    margin=\"normal\"\r\n                                    required={true}\r\n                                    helperText={\r\n                                        touched.password ? errors.password : ''\r\n                                    }\r\n                                    error={\r\n                                        touched.password &&\r\n                                        Boolean(errors.password)\r\n                                    }\r\n                                    value={values.password}\r\n                                    onChange={handleChange}\r\n                                    type=\"password\"\r\n                                />\r\n                                <Button\r\n                                    type=\"submit\"\r\n                                    fullWidth={true}\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    className={classes.submit}\r\n                                >\r\n                                    Login\r\n                                </Button>\r\n                            </form>\r\n                        )}\r\n                    </Formik>\r\n                </Grid>\r\n                <Grid item xs={9}>\r\n                    <Typography>\r\n                        <Link\r\n                            onClick={() => props.handleClick('register')}\r\n                            href=\"#\"\r\n                        >\r\n                            Don't have an account?\r\n                        </Link>\r\n                    </Typography>\r\n                </Grid>\r\n            </Grid>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;\r\n","import React from 'react';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport Button from '@material-ui/core/Button';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Link from '@material-ui/core/Link';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { Formik } from 'formik';\r\nimport * as Yup from 'yup';\r\n\r\nimport history from '../Utilities/history';\r\nimport { useRegister } from '../Services/authenticationService';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: {\r\n        marginTop: theme.spacing(8),\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n    },\r\n    form: {\r\n        width: '100%',\r\n        marginTop: theme.spacing(1),\r\n    },\r\n    submit: {\r\n        margin: theme.spacing(3, 0, 2),\r\n    },\r\n}));\r\n\r\nconst Register = props => {\r\n    const register = useRegister();\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.paper}>\r\n            <Grid container>\r\n                <Grid item>\r\n                    <Typography component=\"h1\" variant=\"h5\" align=\"center\">\r\n                        Register\r\n                    </Typography>\r\n                    <Formik\r\n                        initialValues={{\r\n                            name: '',\r\n                            username: '',\r\n                            password: '',\r\n                            password2: '',\r\n                        }}\r\n                        validationSchema={Yup.object().shape({\r\n                            name: Yup.string()\r\n                                .required('Name is required')\r\n                                .max(40, 'Too Long!'),\r\n                            username: Yup.string()\r\n                                .required('Username is required')\r\n                                .max(40, 'Username address too long'),\r\n                            password: Yup.string()\r\n                                .required('Password is Required')\r\n                                .max(100, 'Password too long')\r\n                                .min(\r\n                                    6,\r\n                                    'Password should be at least 6 characters long'\r\n                                ),\r\n                            password2: Yup.string().oneOf(\r\n                                [Yup.ref('password'), null],\r\n                                'Passwords do not match'\r\n                            ),\r\n                        })}\r\n                        onSubmit={(\r\n                            { name, username, password, password2 },\r\n                            { setStatus, setSubmitting }\r\n                        ) => {\r\n                            setStatus();\r\n                            register(name, username, password, password2).then(\r\n                                user => {\r\n                                    const { from } = history.location.state || {\r\n                                        from: { pathname: '/chat' },\r\n                                    };\r\n                                    history.push(from);\r\n                                },\r\n                                error => {\r\n                                    setSubmitting(false);\r\n                                    setStatus(error);\r\n                                }\r\n                            );\r\n                        }}\r\n                        validateOnChange={false}\r\n                        validateOnBlur={false}\r\n                    >\r\n                        {({\r\n                            handleSubmit,\r\n                            handleChange,\r\n                            values,\r\n                            touched,\r\n                            isValid,\r\n                            errors,\r\n                        }) => (\r\n                            <form\r\n                                onSubmit={handleSubmit}\r\n                                className={classes.form}\r\n                            >\r\n                                <TextField\r\n                                    id=\"name\"\r\n                                    className={classes.textField}\r\n                                    name=\"name\"\r\n                                    label=\"Name\"\r\n                                    fullWidth={true}\r\n                                    variant=\"outlined\"\r\n                                    margin=\"normal\"\r\n                                    required={true}\r\n                                    helperText={touched.name ? errors.name : ''}\r\n                                    error={touched.name && Boolean(errors.name)}\r\n                                    value={values.name}\r\n                                    onChange={handleChange}\r\n                                />\r\n\r\n                                <TextField\r\n                                    id=\"username\"\r\n                                    className={classes.textField}\r\n                                    name=\"username\"\r\n                                    label=\"Username\"\r\n                                    fullWidth={true}\r\n                                    variant=\"outlined\"\r\n                                    margin=\"normal\"\r\n                                    required={true}\r\n                                    helperText={\r\n                                        touched.username ? errors.username : ''\r\n                                    }\r\n                                    error={\r\n                                        touched.username &&\r\n                                        Boolean(errors.username)\r\n                                    }\r\n                                    value={values.username}\r\n                                    onChange={handleChange}\r\n                                />\r\n\r\n                                <TextField\r\n                                    id=\"password\"\r\n                                    className={classes.textField}\r\n                                    name=\"password\"\r\n                                    label=\"Password\"\r\n                                    fullWidth={true}\r\n                                    variant=\"outlined\"\r\n                                    margin=\"normal\"\r\n                                    required={true}\r\n                                    helperText={\r\n                                        touched.password ? errors.password : ''\r\n                                    }\r\n                                    error={\r\n                                        touched.password &&\r\n                                        Boolean(errors.password)\r\n                                    }\r\n                                    value={values.password}\r\n                                    onChange={handleChange}\r\n                                    type=\"password\"\r\n                                />\r\n\r\n                                <TextField\r\n                                    id=\"password2\"\r\n                                    className={classes.textField}\r\n                                    name=\"password2\"\r\n                                    label=\"Confirm Password\"\r\n                                    fullWidth={true}\r\n                                    variant=\"outlined\"\r\n                                    margin=\"normal\"\r\n                                    required={true}\r\n                                    helperText={\r\n                                        touched.password2\r\n                                            ? errors.password2\r\n                                            : ''\r\n                                    }\r\n                                    error={\r\n                                        touched.password2 &&\r\n                                        Boolean(errors.password2)\r\n                                    }\r\n                                    value={values.password2}\r\n                                    onChange={handleChange}\r\n                                    type=\"password\"\r\n                                />\r\n\r\n                                <Button\r\n                                    type=\"submit\"\r\n                                    fullWidth={true}\r\n                                    variant=\"contained\"\r\n                                    color=\"primary\"\r\n                                    className={classes.submit}\r\n                                >\r\n                                    Register\r\n                                </Button>\r\n                            </form>\r\n                        )}\r\n                    </Formik>\r\n                </Grid>\r\n                <Grid item xs={9}>\r\n                    <Typography>\r\n                        <Link\r\n                            onClick={() => props.handleClick('login')}\r\n                            href=\"#\"\r\n                        >\r\n                            Already have an account?\r\n                        </Link>\r\n                    </Typography>\r\n                </Grid>\r\n            </Grid>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Register;\r\n","import React, { useState, useEffect } from 'react';\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport history from '../Utilities/history';\r\nimport Login from './Login';\r\nimport Register from './Register';\r\nimport { authenticationService } from '../Services/authenticationService';\r\n\r\nconst Home = () => {\r\n    const [page, setPage] = useState('login');\r\n\r\n    useEffect(() => {\r\n        if (authenticationService.currentUserValue) {\r\n            history.push('/chat');\r\n        }\r\n    }, []);\r\n\r\n    const handleClick = location => {\r\n        setPage(location);\r\n    };\r\n\r\n    let Content;\r\n\r\n    if (page === 'login') {\r\n        Content = <Login handleClick={handleClick} />;\r\n    } else {\r\n        Content = <Register handleClick={handleClick} />;\r\n    }\r\n\r\n    return (\r\n        <Container component=\"main\" maxWidth=\"xs\">\r\n            {Content}\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Home;\r\n","import React, { useState } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Button from '@material-ui/core/Button';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Link from '@material-ui/core/Link';\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\r\n\r\nimport { authenticationService } from '../Services/authenticationService';\r\nimport history from '../Utilities/history';\r\nimport logo from './logo.png';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    root: {\r\n        flexGrow: 1,\r\n    },\r\n    title: {\r\n        flexGrow: 1,\r\n        display: 'flex',\r\n    },\r\n    userDropdown: {\r\n        marginLeft: theme.spacing(2),\r\n        padding: theme.spacing(1),\r\n        [theme.breakpoints.down('xs')]: {\r\n            marginLeft: 'auto',\r\n        },\r\n    },\r\n}));\r\n\r\nconst Header = () => {\r\n    const [currentUser] = useState(authenticationService.currentUserValue);\r\n    const [anchorEl, setAnchorEl] = useState(null);\r\n    const [dropdownOpen, setDropdownOpen] = useState(false);\r\n\r\n    const handleDropClose = () => {\r\n        setDropdownOpen(false);\r\n        setAnchorEl(null);\r\n    };\r\n\r\n    const handleDropOpen = event => {\r\n        setDropdownOpen(true);\r\n        setAnchorEl(event.currentTarget);\r\n    };\r\n\r\n    const handleLogout = () => {\r\n        authenticationService.logout();\r\n        history.push('/');\r\n    };\r\n\r\n    const arrowIcon = () => {\r\n        if (dropdownOpen) {\r\n            return <ArrowDropUpIcon />;\r\n        }\r\n        return <ArrowDropDownIcon />;\r\n    };\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n        <div className={classes.root}>\r\n            <AppBar position=\"static\">\r\n                <Toolbar>\r\n                    <Link href=\"/\" className={classes.title}>\r\n                        <img src={logo} alt=\"Logo\" />\r\n                    </Link>\r\n                    <Button\r\n                        aria-owns={anchorEl ? 'simple-menu' : undefined}\r\n                        aria-haspopup=\"true\"\r\n                        onClick={handleDropOpen}\r\n                        className={classes.userDropdown}\r\n                        color=\"inherit\"\r\n                    >\r\n                        {currentUser.name}\r\n                        {arrowIcon()}\r\n                    </Button>\r\n                    <Menu\r\n                        id=\"simple-menu\"\r\n                        anchorEl={anchorEl}\r\n                        open={Boolean(anchorEl)}\r\n                        onClose={handleDropClose}\r\n                        getContentAnchorEl={null}\r\n                        anchorOrigin={{\r\n                            vertical: 'bottom',\r\n                            horizontal: 'right',\r\n                        }}\r\n                        transformOrigin={{\r\n                            vertical: 'top',\r\n                            horizontal: 'right',\r\n                        }}\r\n                    >\r\n                        <MenuItem onClick={handleLogout}>Logout</MenuItem>\r\n                    </Menu>\r\n                </Toolbar>\r\n            </AppBar>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Header;\r\n","export default {\r\n  getInitialsFromName: (name) => {\r\n    const letters = String(name)\r\n      .split(\" \")\r\n      .map((i) => i.charAt(0));\r\n    return letters.join(\"\");\r\n  },\r\n};\r\n","import { authenticationService } from '../Services/authenticationService';\r\n\r\nfunction authHeader() {\r\n    const currentUser = authenticationService.currentUserValue;\r\n    if (currentUser && currentUser.token) {\r\n        return {\r\n            Authorization: `${currentUser.token}`,\r\n            'Content-Type': 'application/json',\r\n        };\r\n    } else {\r\n        return {};\r\n    }\r\n}\r\n\r\nexport default authHeader;\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport SendIcon from \"@material-ui/icons/Send\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport socketIOClient from \"socket.io-client\";\r\nimport classnames from \"classnames\";\r\nimport commonUtilites from \"../Utilities/common\";\r\nimport {\r\n  useGetGlobalMessages,\r\n  useSendGlobalMessage,\r\n  useGetConversationMessages,\r\n  useSendConversationMessage,\r\n} from \"../Services/chatService\";\r\nimport { authenticationService } from \"../Services/authenticationService\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: \"100%\",\r\n  },\r\n  headerRow: {\r\n    maxHeight: 60,\r\n    zIndex: 5,\r\n  },\r\n  paper: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n    height: \"100%\",\r\n    color: theme.palette.primary.dark,\r\n  },\r\n  messageContainer: {\r\n    height: \"100%\",\r\n    display: \"flex\",\r\n    alignContent: \"flex-end\",\r\n  },\r\n  messagesRow: {\r\n    maxHeight: \"calc(100vh - 184px)\",\r\n    overflowY: \"auto\",\r\n  },\r\n  newMessageRow: {\r\n    width: \"100%\",\r\n    padding: theme.spacing(0, 2, 1),\r\n  },\r\n  messageBubble: {\r\n    padding: 10,\r\n    border: \"1px solid white\",\r\n    backgroundColor: \"white\",\r\n    borderRadius: \"0 10px 10px 10px\",\r\n    boxShadow: \"-3px 4px 4px 0px rgba(0,0,0,0.08)\",\r\n    marginTop: 8,\r\n    maxWidth: \"40em\",\r\n  },\r\n  messageBubbleRight: {\r\n    borderRadius: \"10px 0 10px 10px\",\r\n  },\r\n  inputRow: {\r\n    display: \"flex\",\r\n    alignItems: \"flex-end\",\r\n  },\r\n  form: {\r\n    width: \"100%\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(1, 1.5),\r\n  },\r\n  listItem: {\r\n    display: \"flex\",\r\n    width: \"100%\",\r\n  },\r\n  listItemRight: {\r\n    flexDirection: \"row-reverse\",\r\n  },\r\n}));\r\n\r\nconst ChatBox = (props) => {\r\n  const [currentUserId] = useState(\r\n    authenticationService.currentUserValue.userId\r\n  );\r\n  const [newMessage, setNewMessage] = useState(\"\");\r\n  const [messages, setMessages] = useState([]);\r\n  const [lastMessage, setLastMessage] = useState(null);\r\n\r\n  const getGlobalMessages = useGetGlobalMessages();\r\n  const sendGlobalMessage = useSendGlobalMessage();\r\n  const getConversationMessages = useGetConversationMessages();\r\n  const sendConversationMessage = useSendConversationMessage();\r\n\r\n  let chatBottom = useRef(null);\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    reloadMessages();\r\n    scrollToBottom();\r\n  }, [lastMessage, props.scope, props.conversationId]);\r\n\r\n  useEffect(() => {\r\n    const socket = socketIOClient(process.env.REACT_APP_API_URL);\r\n    socket.on(\"messages\", (data) => setLastMessage(data));\r\n  }, []);\r\n\r\n  const reloadMessages = () => {\r\n    if (props.scope === \"Global Chat\") {\r\n      getGlobalMessages().then((res) => {\r\n        setMessages(res);\r\n      });\r\n    } else if (props.scope !== null && props.conversationId !== null) {\r\n      getConversationMessages(props.user._id).then((res) => setMessages(res));\r\n    } else {\r\n      setMessages([]);\r\n    }\r\n  };\r\n\r\n  const scrollToBottom = () => {\r\n    chatBottom.current.scrollIntoView({ behavior: \"smooth\" });\r\n  };\r\n\r\n  useEffect(scrollToBottom, [messages]);\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (props.scope === \"Global Chat\") {\r\n      sendGlobalMessage(newMessage).then(() => {\r\n        setNewMessage(\"\");\r\n      });\r\n    } else {\r\n      sendConversationMessage(props.user._id, newMessage).then((res) => {\r\n        setNewMessage(\"\");\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Grid container className={classes.root}>\r\n      <Grid item xs={12} className={classes.headerRow}>\r\n        <Paper className={classes.paper} square elevation={2}>\r\n          <Typography color=\"inherit\" variant=\"h6\">\r\n            {props.scope}\r\n          </Typography>\r\n        </Paper>\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <Grid container className={classes.messageContainer}>\r\n          <Grid item xs={12} className={classes.messagesRow}>\r\n            {messages && (\r\n              <List>\r\n                {messages.map((m) => (\r\n                  <ListItem\r\n                    key={m._id}\r\n                    className={classnames(classes.listItem, {\r\n                      [`${classes.listItemRight}`]:\r\n                        m.fromObj[0]._id === currentUserId,\r\n                    })}\r\n                    alignItems=\"flex-start\"\r\n                  >\r\n                    <ListItemAvatar className={classes.avatar}>\r\n                      <Avatar>\r\n                        {commonUtilites.getInitialsFromName(m.fromObj[0].name)}\r\n                      </Avatar>\r\n                    </ListItemAvatar>\r\n                    <ListItemText\r\n                      classes={{\r\n                        root: classnames(classes.messageBubble, {\r\n                          [`${classes.messageBubbleRight}`]:\r\n                            m.fromObj[0]._id === currentUserId,\r\n                        }),\r\n                      }}\r\n                      primary={m.fromObj[0] && m.fromObj[0].name}\r\n                      secondary={<React.Fragment>{m.body}</React.Fragment>}\r\n                    />\r\n                  </ListItem>\r\n                ))}\r\n              </List>\r\n            )}\r\n            <div ref={chatBottom} />\r\n          </Grid>\r\n          <Grid item xs={12} className={classes.inputRow}>\r\n            <form onSubmit={handleSubmit} className={classes.form}>\r\n              <Grid\r\n                container\r\n                className={classes.newMessageRow}\r\n                alignItems=\"flex-end\"\r\n              >\r\n                <Grid item xs={11}>\r\n                  <TextField\r\n                    id=\"message\"\r\n                    label=\"Message\"\r\n                    variant=\"outlined\"\r\n                    margin=\"dense\"\r\n                    fullWidth\r\n                    value={newMessage}\r\n                    onChange={(e) => setNewMessage(e.target.value)}\r\n                  />\r\n                </Grid>\r\n                <Grid item xs={1}>\r\n                  <IconButton type=\"submit\">\r\n                    <SendIcon />\r\n                  </IconButton>\r\n                </Grid>\r\n              </Grid>\r\n            </form>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default ChatBox;\r\n","import useHandleResponse from '../Utilities/handle-response';\r\nimport authHeader from '../Utilities/auth-header';\r\nimport { useSnackbar } from 'notistack';\r\n\r\n// Receive global messages\r\nexport function useGetGlobalMessages() {\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const handleResponse = useHandleResponse();\r\n    const requestOptions = {\r\n        method: 'GET',\r\n        headers: authHeader(),\r\n    };\r\n\r\n    const getGlobalMessages = () => {\r\n        return fetch(\r\n            `${process.env.REACT_APP_API_URL}/api/messages/global`,\r\n            requestOptions\r\n        )\r\n            .then(handleResponse)\r\n            .catch(() =>\r\n                enqueueSnackbar('Could not load Global Chat', {\r\n                    variant: 'error',\r\n                })\r\n            );\r\n    };\r\n\r\n    return getGlobalMessages;\r\n}\r\n\r\n// Send a global message\r\nexport function useSendGlobalMessage() {\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const handleResponse = useHandleResponse();\r\n\r\n    const sendGlobalMessage = body => {\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: authHeader(),\r\n            body: JSON.stringify({ body: body, global: true }),\r\n        };\r\n\r\n        return fetch(\r\n            `${process.env.REACT_APP_API_URL}/api/messages/global`,\r\n            requestOptions\r\n        )\r\n            .then(handleResponse)\r\n            .catch(err => {\r\n                console.log(err);\r\n                enqueueSnackbar('Could send message', {\r\n                    variant: 'error',\r\n                });\r\n            });\r\n    };\r\n\r\n    return sendGlobalMessage;\r\n}\r\n\r\n// Get list of users conversations\r\nexport function useGetConversations() {\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const handleResponse = useHandleResponse();\r\n    const requestOptions = {\r\n        method: 'GET',\r\n        headers: authHeader(),\r\n    };\r\n\r\n    const getConversations = () => {\r\n        return fetch(\r\n            `${process.env.REACT_APP_API_URL}/api/messages/conversations`,\r\n            requestOptions\r\n        )\r\n            .then(handleResponse)\r\n            .catch(() =>\r\n                enqueueSnackbar('Could not load chats', {\r\n                    variant: 'error',\r\n                })\r\n            );\r\n    };\r\n\r\n    return getConversations;\r\n}\r\n\r\n// get conversation messages based on\r\n// to and from id's\r\nexport function useGetConversationMessages() {\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const handleResponse = useHandleResponse();\r\n    const requestOptions = {\r\n        method: 'GET',\r\n        headers: authHeader(),\r\n    };\r\n\r\n    const getConversationMessages = id => {\r\n        return fetch(\r\n            `${\r\n                process.env.REACT_APP_API_URL\r\n            }/api/messages/conversations/query?userId=${id}`,\r\n            requestOptions\r\n        )\r\n            .then(handleResponse)\r\n            .catch(() =>\r\n                enqueueSnackbar('Could not load chats', {\r\n                    variant: 'error',\r\n                })\r\n            );\r\n    };\r\n\r\n    return getConversationMessages;\r\n}\r\n\r\nexport function useSendConversationMessage() {\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const handleResponse = useHandleResponse();\r\n\r\n    const sendConversationMessage = (id, body) => {\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: authHeader(),\r\n            body: JSON.stringify({ to: id, body: body }),\r\n        };\r\n\r\n        return fetch(\r\n            `${process.env.REACT_APP_API_URL}/api/messages/`,\r\n            requestOptions\r\n        )\r\n            .then(handleResponse)\r\n            .catch(err => {\r\n                console.log(err);\r\n                enqueueSnackbar('Could send message', {\r\n                    variant: 'error',\r\n                });\r\n            });\r\n    };\r\n\r\n    return sendConversationMessage;\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport LanguageIcon from \"@material-ui/icons/Language\";\r\nimport Divider from \"@material-ui/core/Divider\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport socketIOClient from \"socket.io-client\";\r\n\r\nimport { useGetConversations } from \"../Services/chatService\";\r\nimport { authenticationService } from \"../Services/authenticationService\";\r\nimport commonUtilites from \"../Utilities/common\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  subheader: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    cursor: \"pointer\",\r\n  },\r\n  globe: {\r\n    backgroundColor: theme.palette.primary.dark,\r\n  },\r\n  subheaderText: {\r\n    color: theme.palette.primary.dark,\r\n  },\r\n  list: {\r\n    maxHeight: \"calc(100vh - 112px)\",\r\n    overflowY: \"auto\",\r\n  },\r\n}));\r\n\r\nconst Conversations = (props) => {\r\n  const classes = useStyles();\r\n  const [conversations, setConversations] = useState([]);\r\n  const [newConversation, setNewConversation] = useState(null);\r\n  const getConversations = useGetConversations();\r\n\r\n  // Returns the recipient name that does not\r\n  // belong to the current user.\r\n  const handleRecipient = (recipients) => {\r\n    for (let i = 0; i < recipients.length; i++) {\r\n      if (\r\n        recipients[i].username !==\r\n        authenticationService.currentUserValue.username\r\n      ) {\r\n        return recipients[i];\r\n      }\r\n    }\r\n    return null;\r\n  };\r\n\r\n  useEffect(() => {\r\n    getConversations().then((res) => setConversations(res));\r\n  }, [newConversation]);\r\n\r\n  useEffect(() => {\r\n    let socket = socketIOClient(process.env.REACT_APP_API_URL);\r\n    socket.on(\"messages\", (data) => setNewConversation(data));\r\n\r\n    return () => {\r\n      socket.removeListener(\"messages\");\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <List className={classes.list}>\r\n      <ListItem\r\n        classes={{ root: classes.subheader }}\r\n        onClick={() => {\r\n          props.setScope(\"Global Chat\");\r\n        }}\r\n      >\r\n        <ListItemAvatar>\r\n          <Avatar className={classes.globe}>\r\n            <LanguageIcon />\r\n          </Avatar>\r\n        </ListItemAvatar>\r\n        <ListItemText className={classes.subheaderText} primary=\"Global Chat\" />\r\n      </ListItem>\r\n      <Divider />\r\n\r\n      {conversations && (\r\n        <React.Fragment>\r\n          {conversations.map((c) => (\r\n            <ListItem\r\n              className={classes.listItem}\r\n              key={c._id}\r\n              button\r\n              onClick={() => {\r\n                props.setUser(handleRecipient(c.recipientObj));\r\n                props.setScope(handleRecipient(c.recipientObj).name);\r\n              }}\r\n            >\r\n              <ListItemAvatar>\r\n                <Avatar>\r\n                  {commonUtilites.getInitialsFromName(\r\n                    handleRecipient(c.recipientObj).name\r\n                  )}\r\n                </Avatar>\r\n              </ListItemAvatar>\r\n              <ListItemText\r\n                primary={handleRecipient(c.recipientObj).name}\r\n                secondary={<React.Fragment>{c.lastMessage}</React.Fragment>}\r\n              />\r\n            </ListItem>\r\n          ))}\r\n        </React.Fragment>\r\n      )}\r\n    </List>\r\n  );\r\n};\r\n\r\nexport default Conversations;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport socketIOClient from \"socket.io-client\";\r\n\r\nimport { useGetUsers } from \"../Services/userService\";\r\nimport commonUtilites from \"../Utilities/common\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  subheader: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    cursor: \"pointer\",\r\n  },\r\n  globe: {\r\n    backgroundColor: theme.palette.primary.dark,\r\n  },\r\n  subheaderText: {\r\n    color: theme.palette.primary.dark,\r\n  },\r\n  list: {\r\n    maxHeight: \"calc(100vh - 112px)\",\r\n    overflowY: \"auto\",\r\n  },\r\n  avatar: {\r\n    margin: theme.spacing(0, 3, 0, 1),\r\n  },\r\n}));\r\n\r\nconst Users = (props) => {\r\n  const classes = useStyles();\r\n  const [users, setUsers] = useState([]);\r\n  const [newUser, setNewUser] = useState(null);\r\n  const getUsers = useGetUsers();\r\n\r\n  useEffect(() => {\r\n    getUsers().then((res) => setUsers(res));\r\n  }, [newUser]);\r\n\r\n  useEffect(() => {\r\n    const socket = socketIOClient(process.env.REACT_APP_API_URL);\r\n    socket.on(\"users\", (data) => {\r\n      setNewUser(data);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <List className={classes.list}>\r\n      {users && (\r\n        <React.Fragment>\r\n          {users.map((u) => (\r\n            <ListItem\r\n              className={classes.listItem}\r\n              key={u._id}\r\n              onClick={() => {\r\n                props.setUser(u);\r\n                props.setScope(u.name);\r\n              }}\r\n              button\r\n            >\r\n              <ListItemAvatar className={classes.avatar}>\r\n                <Avatar>{commonUtilites.getInitialsFromName(u.name)}</Avatar>\r\n              </ListItemAvatar>\r\n              <ListItemText primary={u.name} />\r\n            </ListItem>\r\n          ))}\r\n        </React.Fragment>\r\n      )}\r\n    </List>\r\n  );\r\n};\r\n\r\nexport default Users;\r\n","import useHandleResponse from '../Utilities/handle-response';\r\nimport authHeader from '../Utilities/auth-header';\r\nimport { useSnackbar } from 'notistack';\r\n\r\nexport function useGetUsers() {\r\n    const { enqueueSnackbar } = useSnackbar();\r\n    const handleResponse = useHandleResponse();\r\n    const requestOptions = {\r\n        method: 'GET',\r\n        headers: authHeader(),\r\n    };\r\n\r\n    const getUsers = () => {\r\n        return fetch(\r\n            `${process.env.REACT_APP_API_URL}/api/users`,\r\n            requestOptions\r\n        )\r\n            .then(handleResponse)\r\n            .catch(() =>\r\n                enqueueSnackbar('Could not load Users', {\r\n                    variant: 'error',\r\n                })\r\n            );\r\n    };\r\n\r\n    return getUsers;\r\n}\r\n","import React, { useState, useEffect } from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport List from '@material-ui/core/List';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\n\r\nimport Header from '../Layout/Header';\r\nimport ChatBox from './ChatBox';\r\nimport Conversations from './Conversations';\r\nimport Users from './Users';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n    paper: {\r\n        minHeight: 'calc(100vh - 64px)',\r\n        borderRadius: 0,\r\n    },\r\n    sidebar: {\r\n        zIndex: 8,\r\n    },\r\n    subheader: {\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        cursor: 'pointer',\r\n    },\r\n    globe: {\r\n        backgroundColor: theme.palette.primary.dark,\r\n    },\r\n    subheaderText: {\r\n        color: theme.palette.primary.dark,\r\n    },\r\n}));\r\n\r\nconst Chat = () => {\r\n    const [scope, setScope] = useState('Global Chat');\r\n    const [tab, setTab] = useState(0);\r\n    const [user, setUser] = useState(null);\r\n    const classes = useStyles();\r\n\r\n    const handleChange = (e, newVal) => {\r\n        setTab(newVal);\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <Header />\r\n            <Grid container>\r\n                <Grid item md={4} className={classes.sidebar}>\r\n                    <Paper className={classes.paper} square elevation={5}>\r\n                        <Paper square>\r\n                            <Tabs\r\n                                onChange={handleChange}\r\n                                variant=\"fullWidth\"\r\n                                value={tab}\r\n                                indicatorColor=\"primary\"\r\n                                textColor=\"primary\"\r\n                            >\r\n                                <Tab label=\"Chats\" />\r\n                                <Tab label=\"Users\" />\r\n                            </Tabs>\r\n                        </Paper>\r\n                        {tab === 0 && (\r\n                            <Conversations\r\n                                setUser={setUser}\r\n                                setScope={setScope}\r\n                            />\r\n                        )}\r\n                        {tab === 1 && (\r\n                            <Users setUser={setUser} setScope={setScope} />\r\n                        )}\r\n                    </Paper>\r\n                </Grid>\r\n                <Grid item md={8}>\r\n                    <ChatBox scope={scope} user={user} />\r\n                </Grid>\r\n            </Grid>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nexport default Chat;\r\n","import React from 'react';\r\nimport { Router, Route } from 'react-router-dom';\r\nimport { createMuiTheme } from '@material-ui/core/styles';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport { ThemeProvider } from '@material-ui/styles';\r\nimport { SnackbarProvider } from 'notistack';\r\n\r\nimport history from './Utilities/history';\r\nimport PrivateRoute from './Utilities/private-route';\r\nimport Home from './Home/Home';\r\nimport Chat from './Chat/Chat';\r\n\r\nconst theme = createMuiTheme({\r\n    palette: {\r\n        primary: {\r\n            light: '#58a5f0',\r\n            main: '#0277bd',\r\n            dark: '#004c8c',\r\n        },\r\n        secondary: {\r\n            light: '#ffd95a',\r\n            main: '#f9a825',\r\n            dark: '#c17900',\r\n            contrastText: '#212121',\r\n        },\r\n        background: {\r\n            default: '#f0f0f0',\r\n        },\r\n    },\r\n    typography: {\r\n        useNextVariants: true,\r\n    },\r\n});\r\n\r\nfunction App() {\r\n    return (\r\n        <ThemeProvider theme={theme}>\r\n            <CssBaseline />\r\n            <SnackbarProvider maxSnack={3} autoHideDuration={3000}>\r\n                <Router history={history}>\r\n                    <Route path=\"/\" exact component={Home} />\r\n                    <PrivateRoute path=\"/chat\" component={Chat} />\r\n                </Router>\r\n            </SnackbarProvider>\r\n        </ThemeProvider>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}